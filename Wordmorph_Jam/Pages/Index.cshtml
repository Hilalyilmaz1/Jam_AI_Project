@page
@model IndexModel
@{
    ViewData["Title"] = "WordMorph - Disleksi Yardımcısı";
    var hasOutput = !string.IsNullOrEmpty(Model.SimplifiedText);
}
<link rel="stylesheet" href="~/css/styles.css" />
<script src="~/js/app.js"></script>


<div class="container">

    @if (!hasOutput)
    {
        <div id="inputSection" class="card input-card">
            <h1>WordMorph</h1>
            <div class="subtitle">Disleksi dostu metin dönüştürücü</div>

            <form method="post">
                <textarea name="UserInputText" placeholder="Metninizi buraya girin...">@Model.UserInputText</textarea>
                <button type="submit">Dönüştür</button>
            </form>
        </div>
    }
    else
    {       
        <div id="outputSection" class="card output-card">
            <h2>Sadeleştirilmiş Metin</h2>
            <div class="output-text">@Html.Raw(Model.ColoredSimplifiedText)t</div>

            <div class="image-preview">
                <img src="@Model.ImageUrl" alt="İlgili görsel" />
            </div>

            <div class="actions">
                <audio controls>
                    <source src="@Model.AudioUrl" type="audio/mpeg" />
                    Tarayıcınız ses dosyasını desteklemiyor.
                </audio>
                <button onclick="goBack()">↩️ Geri Dön</button>
            </div>
        </div>
    }

</div>

<script>

    @* function speakText() {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = "tr-TR";
        window.speechSynthesis.speak(msg);
    } *@
    function goBack() {
        window.location.href = "/";
    }
</script>
